<div class="send-pdf-container">
  <h2>ðŸ“„ Generate Sales Report</h2>

  <!-- Form -->
  <form (ngSubmit)="onSubmit()" class="pdf-form">
    <!-- Client -->
    <div class="form-group">
      <label>Select Client</label>
      <select [(ngModel)]="filters.client" name="client">
        <option value="">-- All Clients --</option>
        <option *ngFor="let client of clients" [value]="client.id">
          {{ client.name }}
        </option>
      </select>
    </div>

    <!-- Date Range -->
    <div class="form-group">
      <label>
        <input type="checkbox" [(ngModel)]="filters.useDateRange" name="useDateRange">
        Use Date Range
      </label>
      <div *ngIf="filters.useDateRange">
        <label>Start Date</label>
        <input type="date" [(ngModel)]="filters.startDate" name="startDate">

        <label>End Date</label>
        <input type="date" [(ngModel)]="filters.endDate" name="endDate">
      </div>
    </div>

    <!-- Days -->
    <div class="form-group" *ngIf="!filters.useDateRange">
      <label>Days</label>
      <input type="number" [(ngModel)]="filters.days" name="days" min="0">
    </div>

    <!-- Deposit -->
    <div class="form-group">
      <label>
        <input type="checkbox" [(ngModel)]="filters.useDeposit" name="useDeposit">
        Include Deposit
      </label>
      <div *ngIf="filters.useDeposit">
        <label>Deposit Amount</label>
        <input type="number" [(ngModel)]="filters.depositAmount" name="depositAmount">

        <label>Deposit Date & Time</label>
        <input type="datetime-local" [(ngModel)]="filters.depositDatetime" name="depositDatetime">
      </div>
    </div>

    <!-- Old Balance -->
    <div class="form-group">
      <label>Old Balance</label>
      <input type="number" [(ngModel)]="filters.oldBalance" name="oldBalance">
    </div>

    <!-- Generate Button -->
    <button type="submit" [disabled]="isGenerating">
      {{ isGenerating ? 'Generating...' : 'Generate PDF' }}
    </button>
  </form>

  <!-- Toast -->
  <div *ngIf="toastMsg" class="toast">{{ toastMsg }}</div>

  <!-- Buttons ABOVE Preview -->
  <div class="download-btn-container" *ngIf="previewUrl">
    <button (click)="downloadPDF()">â¬‡ Download PDF</button>
    <button class="whatsapp-btn" (click)="sendToWhatsApp()">ðŸ’¬ Send on WhatsApp</button>
  </div>

  <!-- PDF Preview -->
  <div class="preview" *ngIf="previewUrl">
    <h3>Preview</h3>
    <iframe [src]="previewUrl" width="100%" height="500px"></iframe>
  </div>
</div>
